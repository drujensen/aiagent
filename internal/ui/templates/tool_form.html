{{define "tool_form_content"}}
<div class="agent-form">
    <h2>{{if .Tool.ID}}Edit Tool{{else}}Create Tool{{end}}</h2>
    <form
        {{if .Tool.ID}}hx-put="/tools/{{.Tool.ID}}"{{else}}hx-post="/tools"{{end}}
        hx-target="#response-message"
        hx-swap="innerHTML">
        <input type="hidden" name="id" value="{{.Tool.ID}}">
        <div class="form-group">
            <label for="tooltype">Tool Type:</label>
            <select id="tooltype" name="tooltype" class="form-control" hx-trigger="change" hx-indicator="#tooltype-loading" required>
                <option value="">Select Tool Type</option>
                {{range .ToolTypes}}
                <option value="{{.Name}}" {{if eq .Name $.ToolType}}selected{{end}}></option>
                {{end}}
            </select>
            <div id="tooltype-loading" class="htmx-indicator">Loading...</div>
            <div id="tooltype-error" style="color: red; display: none;"></div>
        </div>
        <div class="form-group">
            <label for="name">Name:</label>
            <input type="text" id="name" name="name" class="form-control" value="{{.Tool.Name}}" required>
        </div>
        <div class="form-group">
            <label for="name">Description:</label>
            <input type="text" id="role" name="role" class="form-control" value="{{.Tool.Description}}" required>
        </div>
        {{range .Configuration}}
        <div class="form-group">
            <label for="configuration">Configuration:</label>
            <input type="text" id="configuration" name="configuration" class="form-control" value="{{.Tool.Configuration}}" placeholder="Tool Configuration">
            <small class="form-text">Use #{value}# for environment variables</small>
        </div>
        {{end}}
        <button type="submit" class="btn-primary"><i class="fas fa-save"></i> Save Tool</button>
    </form>
    <div id="response-message"></div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const toolTypeSelect = document.getElementById('tooltype');
    const providerErrorDiv = document.getElementById('tooltype-error');
    const providerLoadingDiv = document.getElementById('tooltype-loading');
});
</script>
{{end}}
