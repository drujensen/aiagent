{{define "agent_form_content"}}
<div class="agent-form">
    <h2>{{if .Agent.ID}}Edit Agent{{else}}Create Agent{{end}}</h2>
    <form {{if .Agent.ID}}hx-put="/api/agents/{{.Agent.ID}}"{{else}}hx-post="/api/agents"{{end}} hx-target="#response-message">
        <input type="hidden" name="id" value="{{.Agent.ID}}">
        <div class="form-group">
            <label for="name">Agent Name:</label>
            <input type="text" id="name" name="name" class="form-control" value="{{.Agent.Name}}" required>
        </div>
        <div class="form-group">
            <label for="endpoint">Endpoint:</label>
            <input type="text" id="endpoint" name="endpoint" class="form-control" value="{{.Agent.Endpoint}}" required>
        </div>
        <div class="form-group">
            <label for="model">Model:</label>
            <input type="text" id="model" name="model" class="form-control" value="{{.Agent.Model}}" required>
        </div>
        <div class="form-group">
            <label for="api_key">API Key:</label>
            <input type="text" id="api_key" name="api_key" class="form-control" value="{{.Agent.APIKey}}" required>
            <small class="form-text text-muted">Use #{VAR_NAME}# to reference an environment variable.</small>
        </div>
        <div class="form-group">
            <label for="system_prompt">System Prompt:</label>
            <textarea id="system_prompt" name="system_prompt" class="form-control" required>{{.Agent.SystemPrompt}}</textarea>
        </div>
        <div class="form-group">
            <label for="temperature">Temperature (optional):</label>
            <input type="number" id="temperature" name="temperature" class="form-control" step="0.1" value="{{if .Agent.Temperature}}{{.Agent.Temperature}}{{end}}">
        </div>
        <div class="form-group">
            <label for="max_tokens">Max Tokens (optional):</label>
            <input type="number" id="max_tokens" name="max_tokens" class="form-control" value="{{if .Agent.MaxTokens}}{{.Agent.MaxTokens}}{{end}}">
        </div>
        <button type="submit" class="btn btn-primary">Save Agent</button>
    </form>
    <div id="response-message"></div>
</div>
{{end}}
